<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Bill Calculator</title>
    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/3097/3097986.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --bg: linear-gradient(135deg, #58649c 0%, #1e3c72 100%);
            --top-bg: #1e3c72;
            --box-bg: white;
            --text: #333;
            --accent: #1e3c72;
            --border: #ddd;
            --result-bg: #e0ffe3;
        }
        [data-theme="dark"] {
            --bg: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            --top-bg: #242323;
            --box-bg: #2d2b2b;
            --text: #ffffff;
            --accent: #9d9a9a;
            --border: #ffffff;
            --result-bg: #116542;
        }
        
        .login-container {
            background: linear-gradient(135deg, #506180, #1e3c72);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', sans-serif;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .login-container .card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
            box-sizing: border-box;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: #1e3c72;
            margin-bottom: 10px;
        }
        
        .title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 5px;
        }
        
        .form-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 8px;
        }
        
        .form-control {
            border-radius: 8px;
            border: 2px solid #e9ecef;
            padding: 12px;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
        }
        
        .form-control:focus {
            border-color: #1e3c72;
            box-shadow: 0 0 0 0.2rem rgba(30, 60, 114, 0.2);
        }
        
        .btn-primary {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            background: #1e3c72;
            border: none;
            margin-top: 10px;
            color: white;
            cursor: pointer;
        }
        
        .btn-primary:hover {
            background: #2a5298;
        }
        
        .switch-text {
            text-align: center;
            margin-top: 20px;
            color: #6c757d;
        }
        
        .switch-link {
            color: #1e3c72;
            font-weight: 600;
            cursor: pointer;
        }
        
        .alert {
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
            padding: 10px;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .form-section {
            display: none;
        }
        
        .form-section.active {
            display: block;
        }
        
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: background 0.3s, color 0.3s;
            min-height: 100vh;
        }
        
        .top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: var(--top-bg);
            color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            z-index: 1000;
            box-sizing: border-box;
            flex-wrap: wrap;
            min-height: 70px;
        }
        
        .top h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        .nav-container {
            display: flex;
            align-items: center;
            flex-grow: 1;
            justify-content: space-between;
        }
        
        .menu {
            display: flex;
            gap: 15px;
            margin: 0 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .menu a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 15px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .menu a:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .header-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-shrink: 0;
        }
        
        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            cursor: pointer;
            font-size: 14px;
            padding: 8px 15px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }
        
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px 10px;
        }
        
        .body {
            padding: 25px;
            margin-top: 90px;
            box-sizing: border-box;
            width: 100%;
        }
        
        .box {
            background: var(--box-bg);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            width: 100%;
            box-sizing: border-box;
        }
        
        .box:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
        }
        
        .box h3 {
            margin-top: 0;
            color: var(--accent);
            font-size: 1.5rem;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        label {
            font-weight: bold;
            margin-top: 10px;
            display: block;
            color: var(--accent);
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            margin: 5px 0 15px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 15px;
            transition: border 0.3s;
            box-sizing: border-box;
            background: var(--box-bg);
            color: var(--text);
        }
        
        input:focus, select:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(30, 60, 114, 0.2);
        }
        
        button {
            padding: 12px 20px;
            background: var(--accent);
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .result {
            background: var(--result-bg);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #10b981;
        }
        
        .graphs {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .graph {
            flex: 1;
            min-width: 300px;
            background: var(--box-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            box-sizing: border-box;
        }
        
        .graph:hover {
            transform: translateY(-5px);
        }
        
        .graph-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--accent);
            text-align: center;
        }
        
        .graph-img {
            width: 100%;
            height: 200px;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .paybox {
            text-align: center;
            margin: 20px 0;
        }
        
        .paybox img {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        @media (max-width: 992px) {
            .top {
                padding: 10px 15px;
            }
            
            .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .menu {
                margin: 10px 0;
                gap: 10px;
            }
            
            .header-controls {
                justify-content: center;
                margin-top: 10px;
            }
        }
        
        @media (max-width: 768px) {
            .top {
                flex-direction: column;
                padding: 10px;
                min-height: auto;
            }
            
            .top h1 {
                font-size: 1.3rem;
                margin-bottom: 10px;
                text-align: center;
            }
            
            .nav-container {
                width: 100%;
            }
            
            .menu {
                flex-direction: column;
                gap: 8px;
                margin: 10px 0;
                width: 100%;
                display: none;
            }
            
            .menu.active {
                display: flex;
            }
            
            .menu a {
                padding: 10px;
                text-align: center;
                width: 100%;
                box-sizing: border-box;
            }
            
            .header-controls {
                flex-direction: column;
                width: 100%;
                gap: 8px;
            }
            
            .theme-toggle, .logout-btn {
                width: 100%;
                text-align: center;
                padding: 10px;
            }
            
            .menu-toggle {
                display: block;
                position: absolute;
                right: 15px;
                top: 15px;
            }
            
            .body {
                margin-top: 120px;
                padding: 15px;
            }
            
            .box {
                padding: 20px;
            }
            
            .box h3 {
                font-size: 1.3rem;
            }
            
            .graphs {
                flex-direction: column;
            }
            
            .graph {
                min-width: 100%;
            }
            
            .login-container .card {
                padding: 20px;
            }
            
            .title {
                font-size: 1.5rem;
            }
            
            .form-title {
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .top h1 {
                font-size: 1.2rem;
            }
            
            .body {
                padding: 10px;
                margin-top: 130px;
            }
            
            .box {
                padding: 15px;
            }
            
            .graph-img {
                height: 150px;
            }
            
            .login-container {
                padding: 10px;
            }
            
            .login-container .card {
                padding: 15px;
            }
        }
        
        .dashboard {
            display: none;
            width: 100%;
        }
        
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 90px;
        }
        
        .menu a.active {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }
    </style>
</head>
<body data-theme="light">
    <div id="loginPage" class="login-container">
        <div id="signin" class="form-section active">
            <div class="card">
                <div class="logo">
                    <div class="title">Energy Calculator</div>
                </div>
                
                <div class="form-title">Sign In</div>
                
                <form onsubmit="return checkSignin(event)">
                    <div class="form-group">
                        <div class="form-label">Email Address</div>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Password</div>
                        <input type="password" class="form-control" id="password" required>
                    </div>
        
                    <button type="submit" class="btn btn-primary">Sign In</button>
                    
                    <div id="signinError" class="alert alert-danger"></div>
                </form>
                
                <div class="switch-text">
                    Don't have an account? 
                    <span class="switch-link" onclick="showSignup()">Sign Up</span>
                </div>
            </div>
        </div>
        
        <div id="signup" class="form-section">
            <div class="card">
                <div class="logo">
                    <i class="fas fa-bolt"></i>
                    <div class="title">Energy Calculator</div>
                </div>
                
                <div class="form-title">Create Account</div>
                
                <form onsubmit="return checkSignup(event)">
                    <div class="form-group">
                        <div class="form-label">Full Name</div>
                        <input type="text" class="form-control" id="name" required>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Email Address</div>
                        <input type="email" class="form-control" id="signupEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Password</div>
                        <input type="password" class="form-control" id="signupPassword" required>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Confirm Password</div>
                        <input type="password" class="form-control" id="confirmPassword" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Create Account</button>
                    
                    <div id="signupError" class="alert alert-danger"></div>
                </form>
                
                <div class="switch-text">
                    Already have an account? 
                    <span class="switch-link" onclick="showSignin()">Sign In</span>
                </div>  
            </div>
        </div>
    </div>

    <div id="dashboard" class="dashboard">
        <div class="top">
            <h1>Energy Bill Calculator</h1>
            <button class="menu-toggle" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="nav-container">
                <nav class="menu" id="mainMenu">
                    <a href="#userinfo" class="active">User Info</a>
                    <a href="#usage">Energy Usage</a>
                    <a href="#graphs">Usage Graphs</a>
                    <a href="#carbon">Carbon Footprint</a>
                    <a href="#payment">Payment</a>
                </nav>
                <div class="header-controls">
                    <button class="theme-toggle" onclick="toggleTheme()">Dark Mode</button>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>
        </div>

        <div class="body">
            <div class="box" id="userinfo">
                <h3>YOUR INFORMATION</h3>
                <label for="fullname">Full Name</label>
                <input type="text" id="fullname" placeholder="Enter your full name" required>
                
                <label for="customerid">Customer ID</label>
                <input type="text" id="customerid" placeholder="Enter your customer ID" required>
                
                <button onclick="saveDetails()">Save Details</button>
                
                <p><b>Name Saved:</b> <span id="savename">None</span></p>
                <p><b>ID Saved:</b> <span id="saveid">None</span></p>
            </div>

            <div class="box" id="usage">
                <h3>ENERGY USAGE & BILLING</h3>
                <label for="billingmonth">Billing Month</label>
                <select id="billingmonth" >
                    <option value="">Select Month</option >
                    <option>January</option>
                    <option>February</option>
                    <option>March</option>
                    <option>April</option>
                    <option>May</option>
                    <option>June</option>
                    <option>July</option>
                    <option>August</option>
                    <option>September</option>
                    <option>October</option>
                    <option>November</option>
                    <option>December</option>
                </select>
                
                <label for="units">Energy Used (kWh)</label>
                <input type="number" id="units" placeholder="Enter kWh used" oninput="showLevel()">
                
                <p><b>Usage Level:</b> <span id="level">N/A</span></p>
                <button onclick="calculateBill()">Calculate Bill</button>
                <div id="billoutput" class="result" style="display:none;"></div>
            </div>

            <div class="box" id="graphs">
                <h3>ENERGY USAGE ANALYSIS</h3>
                <div class="graphs">
                    <div class="graph">
                        <div class="graph-title">Monthly Consumption</div>
                        <img src="https://www.researchgate.net/profile/Abhisek-Ukil/publication/268510365/figure/fig3/AS:614381247287298@1523491312743/Average-monthly-electricity-consumption-and-ambient-temperature.png" 
                             alt="Monthly Consumption Graph" class="graph-img">
                    </div>
                    <div class="graph">
                        <div class="graph-title">Cost Breakdown</div>
                        <img src="https://www.researchgate.net/profile/Ahmet_Kurtulus/publication/273776767/figure/fig3/AS:294718949871617/1447277881042/Monthly-Electricity-Consumption-kWh.png" 
                             alt="Cost Breakdown Graph" class="graph-img">
                    </div>
                </div>
            </div>

            <div class="box" id="carbon">
                <h3>CARBON FOOTPRINT CALCULATOR</h3>

                <label for="carbonUnits">Units Consumed (kWh)</label>
                <input type="number" id="carbonUnits" placeholder="Enter kWh used" >
                
                <button onclick="calculateCarbon()">Calculate Carbon Output</button>
                
                <p><b>Carbon Emission:</b> <span id="carbonresult">0</span> kg CO₂</p>
                <div class="result" id="carbonMessage" style="display:none;">
                    <p>Your carbon footprint is equivalent to planting <span id="trees">0</span> trees to offset.</p>
                </div>
            </div>

            <div class="box" id="payment">
                <h3>PAYMENT</h3>
                <p>Scan QR to Pay</p>
                <div class="paybox">
                    <img src="https://th.bing.com/th/id/OIP.RIL5l-BiJezGQxHzXDViHwHaMO?w=114&h=180&c=7&r=0&o=7&dpr=1.5&pid=1.7&rm=3" alt="QR Code for Payment">
                </div>
                <button onclick="makePayment()">Pay Now</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (window.innerWidth <= 768) {
                document.body.classList.add('mobile-device');
            }
            
            if (localStorage.getItem('loggedIn') === 'true') {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                
                const savedName = localStorage.getItem('userName');
                const savedId = localStorage.getItem('userId');
                if (savedName) {
                    document.getElementById('savename').textContent = savedName;
                }
                if (savedId) {
                    document.getElementById('saveid').textContent = savedId;
                }
            }
            
            setupMenuHighlighting();
        });

        function showSignup() {
            document.getElementById('signin').classList.remove('active');
            document.getElementById('signup').classList.add('active');
            clearErrors();
        }

        function showSignin() {
            document.getElementById('signup').classList.remove('active');
            document.getElementById('signin').classList.add('active');
            clearErrors();
        }

        function clearErrors() {
            document.getElementById('signinError').style.display = 'none';
            document.getElementById('signupError').style.display = 'none';
        }

        function checkSignin(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const error = document.getElementById('signinError');

            if (email === '' || password === '') {
                error.textContent = 'Please fill in all fields';
                error.style.display = 'block';
                return false;
            }

            if (email === 'mags@gmail.com' && password === 'magsweb') {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                localStorage.setItem('loggedIn', 'true');
            } else {
                error.textContent = 'Invalid email or password';
                error.style.display = 'block';
            }
            return false;
        }

        function checkSignup(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value.trim();
            const confirm = document.getElementById('confirmPassword').value.trim();
            const error = document.getElementById('signupError');

            if (name === '' || email === '' || password === '' || confirm === '') {
                error.textContent = 'Please fill in all fields';
                error.style.display = 'block';
                return false;
            }

            if (password !== confirm) {
                error.textContent = 'Passwords do not match';
                error.style.display = 'block';
                return false;
            }

            alert('Account created successfully!');
            showSignin();
            return false;
        }

        function logout() {
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
            localStorage.removeItem('loggedIn');
        }

        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.dataset.theme;
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            body.dataset.theme = newTheme;
            document.querySelector('.theme-toggle').textContent = newTheme === 'light' ? 'Dark Mode' : 'Light Mode';
            
            localStorage.setItem('theme', newTheme);
        }

        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.body.dataset.theme = savedTheme;
            document.querySelector('.theme-toggle').textContent = savedTheme === 'light' ? 'Dark Mode' : 'Light Mode';
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mainMenu');
            menu.classList.toggle('active');
        }

        function setupMenuHighlighting() {
            const sections = document.querySelectorAll('.box');
            const menuItems = document.querySelectorAll('.menu a');
            
            window.addEventListener('scroll', function() {
                let current = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionHeight = section.clientHeight;
                    if (pageYOffset >= sectionTop && pageYOffset < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });
                
                menuItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('href').substring(1) === current) {
                        item.classList.add('active');
                    }
                });
            });
        }

        function saveDetails() {
            const name = document.getElementById("fullname").value.trim();
            const id = document.getElementById("customerid").value.trim();
            if (!name || !id) {
                alert("Please enter both your name and customer ID.");
                return;
            }
            document.getElementById("savename").textContent = name;
            document.getElementById("saveid").textContent = id;
            
            localStorage.setItem('userName', name);
            localStorage.setItem('userId', id);
            
            highlightBox("userinfo");
        }

        function showLevel() {
            const units = document.getElementById("units").value;
            const levelElement = document.getElementById("level");
            if(!units) {
                levelElement.textContent = "N/A";
                levelElement.style.color = "#333";
                return;
            }
            else if (units <= 100) {
                levelElement.textContent = "Low";
                levelElement.style.color = "#10b981";
            } else if (units <= 300) {
                levelElement.textContent = "Medium";
                levelElement.style.color = "#f59e0b";
            } else {
                levelElement.textContent = "High";
                levelElement.style.color = "#ef4444";
            }
        }

        function calculateBill() {
            const units = Number(document.getElementById("units").value);
            const outputElement = document.getElementById("billoutput");
            
            if (!units || units < 0) {
                alert("Please enter a valid number of units.");
                return;
            }
            
            let bill = 0;
            if (units <= 100) {
                bill = 0;
            } else if (units <= 200) {
                bill = (units - 100) * 2.35;
            } else if (units <= 400) {
                bill = (100 * 2.35) + ((units - 200) * 4.70);
            } else {
                bill = (100 * 2.35) + (200 * 4.70) + ((units - 400) * 6.30);
            }
            outputElement.style.display = "block";
            outputElement.innerHTML = `<h4>Total Bill: ₹${bill.toFixed(2)}</h4>`;
            highlightBox("usage");
        }

        function calculateCarbon() {
            const units = Number(document.getElementById("carbonUnits").value);
            
            if (!units || units < 0) {
                alert("Please enter a valid number of units.");
                return;
            }
            
            const result = units * 0.82;
            document.getElementById("carbonresult").textContent = result.toFixed(2);
            const treesNeeded = Math.ceil(result / 21);
            document.getElementById("trees").textContent = treesNeeded;
            document.getElementById("carbonMessage").style.display = "block";
            highlightBox("carbon");
        }

        function makePayment() {
            alert("Payment processed successfully!");
            highlightBox("payment");
        }

        function highlightBox(boxId) {
            const box = document.getElementById(boxId);
            box.style.borderLeft = "4px solid #10b981";
            setTimeout(() => box.style.borderLeft = "none", 2000);
        }
    </script>
</body>
</html>
